<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-interview/interview-spring">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Spring 篇 | 与你同行-黑铁教程</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://yntx-it.github.io/yntx-black-iron-tutorial-fronted/docs/interview/interview-spring"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Spring 篇 | 与你同行-黑铁教程"><meta data-rh="true" name="description" content="IOC"><meta data-rh="true" property="og:description" content="IOC"><link data-rh="true" rel="icon" href="/yntx-black-iron-tutorial-fronted/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://yntx-it.github.io/yntx-black-iron-tutorial-fronted/docs/interview/interview-spring"><link data-rh="true" rel="alternate" href="https://yntx-it.github.io/yntx-black-iron-tutorial-fronted/docs/interview/interview-spring" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://yntx-it.github.io/yntx-black-iron-tutorial-fronted/docs/interview/interview-spring" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/yntx-black-iron-tutorial-fronted/blog/rss.xml" title="与你同行-黑铁教程 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/yntx-black-iron-tutorial-fronted/blog/atom.xml" title="与你同行-黑铁教程 Atom Feed"><link rel="stylesheet" href="/yntx-black-iron-tutorial-fronted/assets/css/styles.39c269dc.css">
<link rel="preload" href="/yntx-black-iron-tutorial-fronted/assets/js/runtime~main.713cf9ba.js" as="script">
<link rel="preload" href="/yntx-black-iron-tutorial-fronted/assets/js/main.8de0dd40.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/yntx-black-iron-tutorial-fronted/"><div class="navbar__logo"><img src="/yntx-black-iron-tutorial-fronted/img/logo.svg" alt="黑铁教程 Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/yntx-black-iron-tutorial-fronted/img/logo.svg" alt="黑铁教程 Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">与你同行-黑铁教程</b></a><a class="navbar__item navbar__link" href="/yntx-black-iron-tutorial-fronted/docs/java">Java教程</a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/yntx-black-iron-tutorial-fronted/docs/interview">面试宝典</a><a class="navbar__item navbar__link" href="/yntx-black-iron-tutorial-fronted/blog">博客</a><a href="https://github.com/yntx-it" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/yntx-black-iron-tutorial-fronted/docs/interview">常见面试题</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/yntx-black-iron-tutorial-fronted/docs/interview/interview-algorithm">算法篇</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/yntx-black-iron-tutorial-fronted/docs/interview/interview-design">设计模式篇</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/yntx-black-iron-tutorial-fronted/docs/interview/interview-base">基础篇</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/yntx-black-iron-tutorial-fronted/docs/interview/interview-collection">集合篇</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/yntx-black-iron-tutorial-fronted/docs/interview/interview-concurrency">并发篇</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/yntx-black-iron-tutorial-fronted/docs/interview/interview-jvm">JVM 篇</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/yntx-black-iron-tutorial-fronted/docs/interview/interview-microservice">微服务篇</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/yntx-black-iron-tutorial-fronted/docs/interview/interview-mysql">MySQL 篇</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/yntx-black-iron-tutorial-fronted/docs/interview/interview-redis">Redis 篇</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/yntx-black-iron-tutorial-fronted/docs/interview/interview-mq">MQ 篇</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/yntx-black-iron-tutorial-fronted/docs/interview/interview-spring">Spring 篇</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/yntx-black-iron-tutorial-fronted/docs/interview/interview-mybatis">MyBatis 的原理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/yntx-black-iron-tutorial-fronted/docs/interview/interview-other">补充篇</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/yntx-black-iron-tutorial-fronted/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/yntx-black-iron-tutorial-fronted/docs/interview"><span itemprop="name">常见面试题</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Spring 篇</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>Spring 篇</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ioc">IOC<a class="hash-link" href="#ioc" title="标题的直接链接">​</a></h2><p>Spring 的 IOC 容器可以理解为一个对象工厂，我们把该对象交给工厂，工厂管理这些对象的创建和依赖关系。</p><p>解决问题：解决的是对象管理和对象依赖的问题。</p><p>我的理解：本来应该是我们手动 new 对象，现在是把对象交给 Spring 的 IOC 容器管理。</p><p>==控制反转==：把原有自己掌握的事交给别人去处理。它更多的是一种思想。</p><p>==依赖注入==：我的理解，它是控制反转的实现方式。对象无需自行创建或者管理它的依赖关系，依赖关系将被自动注入到需要他们的对象中去。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="aop">AOP<a class="hash-link" href="#aop" title="标题的直接链接">​</a></h2><p>AOP，即==面向切面编程==，是对 OOP（面向对象编程）的补充和完善。</p><p>解决问题：==非业务代码抽取== 的问题，==降低耦合==。</p><p>实现原理：AOP 的底层技术是==动态代理==，在 Spring 内实现依赖的是 BeanPostProcessor。</p><p>我的理解：就是在方法前后增加非业务代码，比如我们需要在方法上注入一些重复性的非业务代码，就可以使用 AOP。</p><p>实战：监控异常信息，及时上报给用户。</p><p>Spring 4 和 Spring 5 通知执行顺序区别：</p><table><thead><tr><th></th><th>Spring 4/Spring Boot 1</th><th>Spring 5/Spring Boot 2</th></tr></thead><tbody><tr><td>正常</td><td>Around -&gt; before -&gt; Around -&gt; After -&gt; AfterReturning</td><td>Around -&gt; before -&gt; AfterReturning-&gt; After -&gt;Around</td></tr><tr><td>异常</td><td>Around -&gt; before -&gt; After -&gt; AfterThrowing</td><td>Around -&gt; Before -&gt; AfterThrowing -&gt; After</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="spring-start">Spring start<a class="hash-link" href="#spring-start" title="标题的直接链接">​</a></h2><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@SpringBootApplication 包含两个注解</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@SpringBootConfiguration 表示是一个Spring Boot配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EnableAutoConfiguration 开启自动配置</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="springboot-自动装配过程">SpringBoot 自动装配过程<a class="hash-link" href="#springboot-自动装配过程" title="标题的直接链接">​</a></h2><p>自动装配依托@Import 的强大功能和 spring 的 SPI 机制。</p><p>通过 SPI 机制发现类，通过@Import 将类注册到 spring 中。</p><p>@SpringBootApplication 这个注解时组合注解里面包含自动扫描注解，里面包含一个 EnableAutoConfiguration 注解，这个注解作用是去寻找每个 jar 包里面的 META-INF/spring.factories 文件，之后将文件里面的类全部实例化。</p><p>每个需要自动装配的模块都需要编写一个 AutoConfiguration 类，这些 AutoConfiguration 类的原理大概是通过@Import 注解将其属性类 Properties 全部到注册 spring 容器中，属性类通过注解@ConfigurationProperties 从配置文件里面取到配置值。之后将关键的类注册为 bean 自动注入属性类进行初始化完成自动装配的功能。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="bean-的生命周期">Bean 的生命周期<a class="hash-link" href="#bean-的生命周期" title="标题的直接链接">​</a></h2><p>五个阶段：<code>创建前准备</code>、<code>创建实例</code>、<code>依赖注入</code>、<code>容器缓存</code>、<code>销毁实例</code>。</p><ol><li><p>==创建前准备==</p><ul><li><p>Bean 在开始加载之前，要从==上下文==和一些==配置==中，解析查找一些 Bean 有关的==扩展实现==</p><ul><li>init-method：容器初始化 bean 的时候调用的方法</li><li>destroy method：容器销毁 bean 的时候调用的方法</li><li>BeanFactoryPostProcessor：这一类的 Bean 加载过程中的一些前置和后置处理扩展实现</li></ul><p>这些类或者配置其实是 Spring 提供给开发者去实现的 Bean 加载过程中的扩展</p></li></ul></li><li><p>==创建实例==</p><ul><li>这个阶段主要作用是通过==反射==去创建 Bean 的实例对象，并且会扫描和解析 Bean 声明的一些属性。</li></ul></li><li><p>==依赖注入==</p><ul><li>如果被实例化的 Bean 存在依赖其他 Bean 对象的一些情况，需要对这些依赖的 Bean 进行对象注入，比如@Autowired 这种配置形式，同时会触发一些扩展的调用，比如说常见的扩展类 BeanPostProcessor，用来实现 Bean 初始化前后的扩展回调，以及像 BeanFactoryAware 等等。</li></ul></li><li><p>==容器缓存==</p><ul><li>主要的作用是把 Bean 保存到容器和 Spring 的缓存中，这个阶段的 Bean 就可以被开发者使用了。</li><li>init-method 这个属性配置的一些方法会被调用，以及 BeanPostProcessor 的后置处理器方法会被触发。</li></ul></li><li><p>==销毁实例==</p><ul><li>Spring 应用上下文被关闭的时候，这个上下文所有的 Bean 都被销毁。</li><li>如果 Bean 实现了 DisposableBean 接口 或者 配置了 destroy method 属性的一些方法，会在这个阶段被调用。</li></ul></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="bean-的作用域">bean 的作用域<a class="hash-link" href="#bean-的作用域" title="标题的直接链接">​</a></h2><p>1、singleton：单例模式，在整个 Spring IoC 容器中，使用 singleton 定义的 Bean 将只有一个实例。
注：spring 默认使用单例模式，因为 Java 在创建 Java 实例时，需要进行内存申请；销毁实例时，需要完成垃圾回收，这些工作都会导致系统开销的增加。而 singleton 作用域的 Bean 实例一旦创建成功，可以重复使用。
2、prototype：原型模式，每次通过容器的 getBean 方法获取 prototype 定义的 Bean 时，都将产生一个新的 Bean 实例
注：prototype 作用域 Bean 的创建、销毁代价比较大。因此，除非必要，否则尽量避免将 Bean 被设置成 prototype 作用域。
3、request：对于每次 HTTP 请求，使用 request 定义的 Bean 都将产生一个新实例，即每次 HTTP 请求将会产生不同的 Bean 实例。只有在 Web 应用中使用 Spring 时，该作用域才有效
4、session：对于每次 HTTP Session，使用 session 定义的 Bean 都将产生一个新实例。同样只有在 Web 应用中使用 Spring 时，该作用域才有效
5、global session：每个全局的 HTTP Session，使用 session 定义的 Bean 都将产生一个新实例。典型情况下，仅在使用 portlet context 的时候有效。同样只有在 Web 应用中使用 Spring 时，该作用域才有效</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="循环依赖">循环依赖<a class="hash-link" href="#循环依赖" title="标题的直接链接">​</a></h2><p>问题：两个或者多个 Bean 相互依赖，导致注入死循环。</p><p>解决：提供了三级缓存机制。</p><ul><li>getBean 去获得一个实例对象的时候，首先会从一级缓存中去找。</li><li>一级缓存中没找到就去二级缓存中找，如果都没找到，意味着这个 Bean 还没实例化，Spring 就会去实例化 Bean。这个时候的 Bean 是早期 Bean，会放到二级缓存。加上一个标记来表示是否存在循环依赖，如果不存在就会放到二级缓存，否则就会标记存在循环依赖，然后会到下一次轮询的时候去赋值，也就是解析 @Autowired 注解时，等 Autowired 注解赋值完成后就会把目标 Bean 存入一级缓存。</li><li>三级缓存是用来存 代理 Bean 的，调用 getBean() 方法时发现目标 Bean 需要通过代理工厂来创建，这个时候会把创建好的实例放到三级缓存，也会把赋值好的 Bean 同步到一级缓存。</li></ul><p>无法解决循环依赖问题的情况：</p><ol><li>多实例 Bean 通过 setter 注入的时候</li><li>构造器注入的 Bean</li><li>单例的代理 Bean 通过 Setter 注入的情况下</li><li>设置 @DependsOn 注解的 Bean</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="spring-事务">Spring 事务<a class="hash-link" href="#spring-事务" title="标题的直接链接">​</a></h2><p>@Transactional 注解参数：propagation、isolation、readOnly、timeout、rollbackFor、noRollbackFor</p><ul><li>==propagation==：事务的传播行为</li></ul><table><thead><tr><th>事务传播行为类型</th><th>说明</th></tr></thead><tbody><tr><td>PROPAGATION_REQUIRED</td><td>如果当前没有事务，就新建一个事务，如果已经存在一个事务中，加入到这个事务中。这是最常见的选择。</td></tr><tr><td>PROPAGATION_SUPPORTS</td><td>支持当前事务，如果当前没有事务，就以非事务方式执行。</td></tr><tr><td>PROPAGATION_MANDATORY</td><td>使用当前的事务，如果当前没有事务，就抛出异常。</td></tr><tr><td>PROPAGATION_REQUIRES_NEW</td><td>新建事务，如果当前存在事务，把当前事务挂起。</td></tr><tr><td>PROPAGATION_NOT_SUPPORTED</td><td>以非事务方式执行操作，如果当前存在事务，就把当前事务挂起。</td></tr><tr><td>PROPAGATION_NEVER</td><td>以非事务方式执行，如果当前存在事务，则抛出异常。</td></tr><tr><td>PROPAGATION_NESTED</td><td>如果当前存在事务，则在嵌套事务内执行。如果当前没有事务，则执行与 PROPAGATION_REQUIRED 类似的操作。</td></tr></tbody></table><ul><li>==isolation==：事务隔离级别</li><li>==timeout==：超时回滚时间</li><li>==readOnly==：只读，不需要事务读取数据时</li><li>==rollbackFor==：触发事务回滚的异常类型</li><li>==noRollbackFor==：不能触发事务回滚的异常类型</li></ul><p>事务失效场景：</p><ol><li><p>非 public 修饰的方法</p></li><li><p>抛出检查异常：如使用 FileInuptStream 时抛出 FileNotFoundException</p></li><li><p>自己 try-catch 异常</p></li><li><p>自定义切面，在事务切面内层，没有抛异常</p></li><li><p>数据库引擎不支持事务</p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="autowired-和-resource-的区别">@Autowired 和 @Resource 的区别<a class="hash-link" href="#autowired-和-resource-的区别" title="标题的直接链接">​</a></h2><p>@Autowired 是 Spring 提供的注解。默认的注入方式为 byType，根据类型匹配。</p><p>@Resource 是 JDK 提供的注解。默认的注入方式为 byName，根据名称匹配。</p><p>当一个接口存在多个实现类的情况下，@Autowired 和 @Resource 都需要通过名称才可以正确匹配到对应的 Bean。</p><p>@Autowired 需要配合 @Qualifer 注解来显示名称，@Resource 可以通过 name 属性来指定名称。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/yntx-it/yntx-black-iron-tutorial-fronted/tree/master/shared/docs/interview/interview-spring.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/yntx-black-iron-tutorial-fronted/docs/interview/interview-mq"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">MQ 篇</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/yntx-black-iron-tutorial-fronted/docs/interview/interview-mybatis"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">MyBatis 的原理</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ioc" class="table-of-contents__link toc-highlight">IOC</a></li><li><a href="#aop" class="table-of-contents__link toc-highlight">AOP</a></li><li><a href="#spring-start" class="table-of-contents__link toc-highlight">Spring start</a></li><li><a href="#springboot-自动装配过程" class="table-of-contents__link toc-highlight">SpringBoot 自动装配过程</a></li><li><a href="#bean-的生命周期" class="table-of-contents__link toc-highlight">Bean 的生命周期</a></li><li><a href="#bean-的作用域" class="table-of-contents__link toc-highlight">bean 的作用域</a></li><li><a href="#循环依赖" class="table-of-contents__link toc-highlight">循环依赖</a></li><li><a href="#spring-事务" class="table-of-contents__link toc-highlight">Spring 事务</a></li><li><a href="#autowired-和-resource-的区别" class="table-of-contents__link toc-highlight">@Autowired 和 @Resource 的区别</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">文档</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/yntx-black-iron-tutorial-fronted/docs/java">Java教程</a></li><li class="footer__item"><a class="footer__link-item" href="/yntx-black-iron-tutorial-fronted/docs/interview">面试宝典</a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/yntx-it" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/yntx-it" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/yntx-it" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">更多</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/yntx-black-iron-tutorial-fronted/blog">本站博客</a></li><li class="footer__item"><a href="https://github.com/yntx-it" target="_blank" rel="noopener noreferrer" class="footer__link-item">与你同行GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/LiZiBa" target="_blank" rel="noopener noreferrer" class="footer__link-item">李子捌GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://blog.csdn.net/qq_41125219" target="_blank" rel="noopener noreferrer" class="footer__link-item">李子捌CSDN<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/johnniewind" target="_blank" rel="noopener noreferrer" class="footer__link-item">借力好风GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 与你同行技术, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/yntx-black-iron-tutorial-fronted/assets/js/runtime~main.713cf9ba.js"></script>
<script src="/yntx-black-iron-tutorial-fronted/assets/js/main.8de0dd40.js"></script>
</body>
</html>