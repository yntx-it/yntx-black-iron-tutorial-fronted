"use strict";(self.webpackChunkyntx_black_iron_tutorial_fronted=self.webpackChunkyntx_black_iron_tutorial_fronted||[]).push([[9597],{3905:(n,e,t)=>{t.d(e,{Zo:()=>s,kt:()=>v});var r=t(7294);function a(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function i(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function l(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?i(Object(t),!0).forEach((function(e){a(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function o(n,e){if(null==n)return{};var t,r,a=function(n,e){if(null==n)return{};var t,r,a={},i=Object.keys(n);for(r=0;r<i.length;r++)t=i[r],e.indexOf(t)>=0||(a[t]=n[t]);return a}(n,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(r=0;r<i.length;r++)t=i[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(a[t]=n[t])}return a}var p=r.createContext({}),c=function(n){var e=r.useContext(p),t=e;return n&&(t="function"==typeof n?n(e):l(l({},e),n)),t},s=function(n){var e=c(n.components);return r.createElement(p.Provider,{value:e},n.children)},u={inlineCode:"code",wrapper:function(n){var e=n.children;return r.createElement(r.Fragment,{},e)}},m=r.forwardRef((function(n,e){var t=n.components,a=n.mdxType,i=n.originalType,p=n.parentName,s=o(n,["components","mdxType","originalType","parentName"]),m=c(t),v=a,d=m["".concat(p,".").concat(v)]||m[v]||u[v]||i;return t?r.createElement(d,l(l({ref:e},s),{},{components:t})):r.createElement(d,l({ref:e},s))}));function v(n,e){var t=arguments,a=e&&e.mdxType;if("string"==typeof n||a){var i=t.length,l=new Array(i);l[0]=m;var o={};for(var p in e)hasOwnProperty.call(e,p)&&(o[p]=e[p]);o.originalType=n,o.mdxType="string"==typeof n?n:a,l[1]=o;for(var c=2;c<i;c++)l[c]=t[c];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},6484:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>p,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var r=t(7462),a=(t(7294),t(3905));const i={},l="\u8bbe\u8ba1\u6a21\u5f0f\u7bc7",o={unversionedId:"interview/interview-design",id:"interview/interview-design",title:"\u8bbe\u8ba1\u6a21\u5f0f\u7bc7",description:"\u5355\u4f8b\u6a21\u5f0f",source:"@site/docs/interview/interview-design.md",sourceDirName:"interview",slug:"/interview/interview-design",permalink:"/docs/interview/interview-design",draft:!1,editUrl:"https://github.com/yntx-it/yntx-black-iron-tutorial-fronted/tree/master/shared/docs/interview/interview-design.md",tags:[],version:"current",frontMatter:{},sidebar:"interview",previous:{title:"\u7b97\u6cd5\u7bc7",permalink:"/docs/interview/interview-algorithm"},next:{title:"\u57fa\u7840\u7bc7",permalink:"/docs/interview/interview-base"}},p={},c=[{value:"\u5355\u4f8b\u6a21\u5f0f",id:"\u5355\u4f8b\u6a21\u5f0f",level:2},{value:"\u997f\u6c49\u5f0f",id:"\u997f\u6c49\u5f0f",level:3},{value:"\u679a\u4e3e\u997f\u6c49\u5f0f",id:"\u679a\u4e3e\u997f\u6c49\u5f0f",level:3},{value:"\u61d2\u6c49\u5f0f",id:"\u61d2\u6c49\u5f0f",level:3},{value:"\u53cc\u68c0\u9501\u61d2\u6c49\u5f0f",id:"\u53cc\u68c0\u9501\u61d2\u6c49\u5f0f",level:3},{value:"\u9759\u6001\u5185\u90e8\u7c7b\u61d2\u6c49\u5f0f",id:"\u9759\u6001\u5185\u90e8\u7c7b\u61d2\u6c49\u5f0f",level:3},{value:"JDK \u4e2d\u5355\u4f8b\u7684\u4f53\u73b0",id:"jdk-\u4e2d\u5355\u4f8b\u7684\u4f53\u73b0",level:3}],s={toc:c};function u(n){let{components:e,...t}=n;return(0,a.kt)("wrapper",(0,r.Z)({},s,t,{components:e,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"\u8bbe\u8ba1\u6a21\u5f0f\u7bc7"},"\u8bbe\u8ba1\u6a21\u5f0f\u7bc7"),(0,a.kt)("h2",{id:"\u5355\u4f8b\u6a21\u5f0f"},"\u5355\u4f8b\u6a21\u5f0f"),(0,a.kt)("p",null,"\u8981\u6c42"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u638c\u63e1\u4e94\u79cd\u5355\u4f8b\u6a21\u5f0f\u7684\u5b9e\u73b0\u65b9\u5f0f"),(0,a.kt)("li",{parentName:"ul"},"\u7406\u89e3\u4e3a\u4f55 DCL \u5b9e\u73b0\u65f6\u8981\u4f7f\u7528 volatile \u4fee\u9970\u9759\u6001\u53d8\u91cf"),(0,a.kt)("li",{parentName:"ul"},"\u4e86\u89e3 jdk \u4e2d\u7528\u5230\u5355\u4f8b\u7684\u573a\u666f")),(0,a.kt)("h3",{id:"\u997f\u6c49\u5f0f"},"\u997f\u6c49\u5f0f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package com.jielihaofeng.interview.pattern;\n\nimport java.io.Serializable;\n\n/**\n * @description \u997f\u6c49\u5f0f\u5355\u4f8b\n * @author Johnnie Wind\n * @date 2022/3/31 16:41\n */\npublic class Singleton1 implements Serializable {\n\n    private Singleton1() {\n        // \u9632\u6b62\u53cd\u5c04\u7834\u574f\u5355\u4f8b\n        if (INSTANCE != null) {\n            throw new RuntimeException("\u5355\u4f8b\u5bf9\u8c61\u4e0d\u80fd\u91cd\u590d\u521b\u5efa");\n        }\n        System.out.println("private Singleton1()");\n    }\n\n    private static final Singleton1 INSTANCE = new Singleton1();\n\n    public static Singleton1 getInstance() {\n        return INSTANCE;\n    }\n\n    public static void otherMethod() {\n        System.out.println("otherMethod()");\n    }\n\n    // \u9632\u6b62\u53cd\u5e8f\u5217\u5316\u7834\u574f\u5355\u4f8b\n    public Object readResolve() {\n        return INSTANCE;\n    }\n}\n')),(0,a.kt)("p",null,"\u6784\u9020\u65b9\u6cd5\u629b\u51fa\u5f02\u5e38\u662f\u9632\u6b62\u53cd\u5c04\u7834\u574f\u5355\u4f8b\nreadResolve() \u662f\u9632\u6b62\u53cd\u5e8f\u5217\u5316\u7834\u574f\u5355\u4f8b"),(0,a.kt)("h3",{id:"\u679a\u4e3e\u997f\u6c49\u5f0f"},"\u679a\u4e3e\u997f\u6c49\u5f0f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package com.jielihaofeng.interview.pattern;\n\n/**\n * @description \u679a\u4e3e\u997f\u6c49\u5f0f\u5355\u4f8b\uff08\u679a\u4e3e\u997f\u6c49\u5f0f\u80fd\u5929\u7136\u9632\u6b62\u53cd\u5c04\u3001\u53cd\u5e8f\u5217\u5316\u7834\u574f\u5355\u4f8b\uff09\n * @author Johnnie Wind\n * @date 2022/3/31 16:45\n */\npublic enum Singleton2 {\n\n    INSTANCE;\n\n    private Singleton2() {\n        System.out.println("private Singleton2()");\n    }\n\n    @Override\n    public String toString() {\n        return getClass().getName() + "@" + Integer.toHexString(hashCode());\n    }\n\n    public static Singleton2 getInstance() {\n        return INSTANCE;\n    }\n\n    public static void otherMethod() {\n        System.out.println("otherMethod()");\n    }\n}\n\n')),(0,a.kt)("p",null,"\u679a\u4e3e\u997f\u6c49\u5f0f\u80fd\u5929\u7136\u9632\u6b62\u53cd\u5c04\u3001\u53cd\u5e8f\u5217\u5316\u7834\u574f\u5355\u4f8b"),(0,a.kt)("h3",{id:"\u61d2\u6c49\u5f0f"},"\u61d2\u6c49\u5f0f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package com.jielihaofeng.interview.pattern;\n\n/**\n * @description \u61d2\u6c49\u5f0f\u5355\u4f8b\n * @author Johnnie Wind\n * @date 2022/3/31 17:06\n */\npublic class Singleton3 {\n\n    private Singleton3() {\n        // \u9632\u6b62\u53cd\u5c04\u7834\u574f\u5355\u4f8b\n        if (INSTANCE != null) {\n            throw new RuntimeException("\u5355\u4f8b\u5bf9\u8c61\u4e0d\u80fd\u91cd\u590d\u521b\u5efa");\n        }\n        System.out.println("private Singleton3()");\n    }\n\n    private static Singleton3 INSTANCE = null;\n\n    // \u8fd9\u91cc\u6709\u591a\u7ebf\u7a0b\u5e76\u53d1\u95ee\u9898\uff0c\u6240\u4ee5\u52a0\u4e86synchronized\u9501\u3002\u5982\u679cINSTANCE\u521b\u5efa\u597d\u4e86\uff0c\u5c31\u4e0d\u9700\u8981\u540c\u6b65\u4e86\uff0c\u4f46\u540e\u7eed\u7ebf\u7a0b\u8c03\u7528\u8fd8\u662f\u4e32\u884c\u5316\u3002\n    public static synchronized Singleton3 getInstance() {\n        if (INSTANCE == null) {\n            INSTANCE = new Singleton3();\n        }\n        return INSTANCE;\n    }\n\n    public static void otherMethod() {\n        System.out.println("otherMethod()");\n    }\n\n    // \u9632\u6b62\u53cd\u5e8f\u5217\u5316\u7834\u574f\u5355\u4f8b\n    public Object readResolve() {\n        return INSTANCE;\n    }\n\n}\n')),(0,a.kt)("p",null,"\u5176\u5b9e\u53ea\u6709\u9996\u6b21\u521b\u5efa\u5355\u4f8b\u5bf9\u8c61\u65f6\u624d\u9700\u8981\u540c\u6b65\uff0c\u4f46\u8be5\u4ee3\u7801\u5b9e\u9645\u4e0a\u6bcf\u6b21\u8c03\u7528\u90fd\u4f1a\u540c\u6b65\n\u56e0\u6b64\u6709\u4e86\u4e0b\u9762\u7684\u53cc\u68c0\u9501\u6539\u8fdb"),(0,a.kt)("h3",{id:"\u53cc\u68c0\u9501\u61d2\u6c49\u5f0f"},"\u53cc\u68c0\u9501\u61d2\u6c49\u5f0f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package com.jielihaofeng.interview.pattern;\n\n/**\n * @description \u61d2\u6c49\u5f0f\u5355\u4f8b DCL(Double Check Lock)\n * @author Johnnie Wind\n * @date 2022/3/31 17:06\n */\npublic class Singleton4 {\n\n    private Singleton4() {\n        // \u9632\u6b62\u53cd\u5c04\u7834\u574f\u5355\u4f8b\n        if (INSTANCE != null) {\n            throw new RuntimeException("\u5355\u4f8b\u5bf9\u8c61\u4e0d\u80fd\u91cd\u590d\u521b\u5efa");\n        }\n        System.out.println("private Singleton4()");\n    }\n\n    // \u8fd9\u91cc\u5fc5\u987b\u52a0 volatile\uff0c\u89e3\u51b3\u53ef\u89c1\u6027\u548c\u6709\u5e8f\u6027\uff0c\u9632\u6b62\u6307\u4ee4\u91cd\u6392\u5e8f\uff0c\n    private static volatile Singleton4 INSTANCE = null;\n\n    // \u53cc\u91cd\u68c0\u67e5\u9501\u6539\u8fdb\n    public static Singleton4 getInstance() {\n        if (INSTANCE == null) {\n            synchronized (Singleton4.class) {\n                if (INSTANCE == null) {\n                    // \u8fd9\u91cc\u53ef\u80fd\u53d1\u751f\u6307\u4ee4\u91cd\u6392\u5e8f\uff1a\n                    // 1.\u521b\u5efa\u5bf9\u8c61\uff0c\u5206\u914d\u7a7a\u95f4\n                    // 2.\u8c03\u7528\u6784\u9020\uff0c\u521d\u59cb\u5316\n                    // 3.\u7ed9\u9759\u6001\u53d8\u91cf\u8d4b\u503c\n                    // \u5982\u679c\u7b2c3\u548c2\u4e92\u6362\u4e86\uff0c\u5c31\u4f1a\u5bfc\u81f4\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u5728\u6700\u5916\u5c42if\u5224\u65ad\u65f6\u62ff\u5230\u4e00\u4e2a\u521d\u59cb\u5316\u4e3a\u5b8c\u5168\u7684INSTANCE\u5bf9\u8c61\n                    INSTANCE = new Singleton4();\n                }\n            }\n        }\n        return INSTANCE;\n    }\n\n    public static void otherMethod() {\n        System.out.println("otherMethod()");\n    }\n\n    // \u9632\u6b62\u53cd\u5e8f\u5217\u5316\u7834\u574f\u5355\u4f8b\n    public Object readResolve() {\n        return INSTANCE;\n    }\n\n}\n\n')),(0,a.kt)("p",null,"\u4e3a\u4f55\u5fc5\u987b\u52a0 volatile\uff1a\nINSTANCE = new Singleton4() \u4e0d\u662f\u539f\u5b50\u7684\uff0c\u5206\u6210 3 \u6b65\uff1a\u521b\u5efa\u5bf9\u8c61\u3001\u8c03\u7528\u6784\u9020\u3001\u7ed9\u9759\u6001\u53d8\u91cf\u8d4b\n\u503c\uff0c\u5176\u4e2d\u540e\u4e24\u6b65\u53ef\u80fd\u88ab\u6307\u4ee4\u91cd\u6392\u5e8f\u4f18\u5316\uff0c\u53d8\u6210\u5148\u8d4b\u503c\u3001\u518d\u8c03\u7528\u6784\u9020\n\u5982\u679c\u7ebf\u7a0b 1 \u5148\u6267\u884c\u4e86\u8d4b\u503c\uff0c\u7ebf\u7a0b 2 \u6267\u884c\u5230\u7b2c\u4e00\u4e2a INSTANCE == null \u65f6\u53d1\u73b0 INSTANCE \u5df2\u7ecf\u4e0d\u4e3a\nnull\uff0c\u6b64\u65f6\u5c31\u4f1a\u8fd4\u56de\u4e00\u4e2a\u672a\u5b8c\u5168\u6784\u9020\u7684\u5bf9\u8c61"),(0,a.kt)("h3",{id:"\u9759\u6001\u5185\u90e8\u7c7b\u61d2\u6c49\u5f0f"},"\u9759\u6001\u5185\u90e8\u7c7b\u61d2\u6c49\u5f0f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'package com.jielihaofeng.interview.pattern;\n\n/**\n * @description \u61d2\u6c49\u5f0f\u5355\u4f8b - \u5185\u90e8\u7c7b\n * @author Johnnie Wind\n * @date 2022/3/31 17:18\n */\npublic class Singleton5 {\n\n    private Singleton5() {\n        System.out.println("private Singleton5()");\n    }\n\n    private static class Holder {\n        static Singleton5 INSTANCE = new Singleton5();\n    }\n\n    public static Singleton5 getInstance() {\n        return Holder.INSTANCE;\n    }\n\n    public static void otherMethod() {\n        System.out.println("otherMethod");\n    }\n}\n')),(0,a.kt)("p",null,"\u907f\u514d\u4e86\u53cc\u68c0\u9501\u7684\u7f3a\u70b9\uff0c\u6bd4\u8f83\u63a8\u8350"),(0,a.kt)("h3",{id:"jdk-\u4e2d\u5355\u4f8b\u7684\u4f53\u73b0"},"JDK \u4e2d\u5355\u4f8b\u7684\u4f53\u73b0"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Runtime")," \u4f53\u73b0\u4e86 ",(0,a.kt)("strong",{parentName:"p"},"\u997f\u6c49\u5f0f\u5355\u4f8b")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"public class Runtime {\n    private static Runtime currentRuntime = new Runtime();\n    public static Runtime getRuntime() {\n        return currentRuntime;\n    }\n    private Runtime() {}\n    ...\n}\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Collections")," \u4e2d\u7684 ",(0,a.kt)("strong",{parentName:"p"},"EmptyNavigableSet")," ",(0,a.kt)("strong",{parentName:"p"},"\u5185\u90e8\u7c7b\u61d2\u6c49\u5f0f\u5355\u4f8b")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'{\n    ...\n    private static class EmptyNavigableSet<E> extends UnmodifiableNavigableSet<E>\n        implements Serializable {\n        private static final long serialVersionUID = -6291252904449939134L;\n\n        public EmptyNavigableSet() {\n            super(new TreeSet<E>());\n        }\n\n        private Object readResolve()        { return EMPTY_NAVIGABLE_SET; }\n    }\n\n    @SuppressWarnings("rawtypes")\n    private static final NavigableSet<?> EMPTY_NAVIGABLE_SET =\n        new EmptyNavigableSet<>();\n    ...\n}\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"ReverseComparator.REVERSE_ORDER")," ",(0,a.kt)("strong",{parentName:"p"},"\u5185\u90e8\u7c7b\u61d2\u6c49\u5f0f\u5355\u4f8b")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"{\n    ...\n    public static <T> Comparator<T> reverseOrder() {\n        return (Comparator<T>) ReverseComparator.REVERSE_ORDER;\n    }\n\n    /**\n     * @serial include\n     */\n    private static class ReverseComparator\n        implements Comparator<Comparable<Object>>, Serializable {\n\n        private static final long serialVersionUID = 7207038068494060240L;\n\n        static final ReverseComparator REVERSE_ORDER\n            = new ReverseComparator();\n\n        public int compare(Comparable<Object> c1, Comparable<Object> c2) {\n            return c2.compareTo(c1);\n        }\n\n        private Object readResolve() { return Collections.reverseOrder(); }\n\n        @Override\n        public Comparator<Comparable<Object>> reversed() {\n            return Comparator.naturalOrder();\n        }\n    }\n    ...\n}\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Comparators.NaturalOrderComparator.INSTANCE")," ",(0,a.kt)("strong",{parentName:"p"},"\u679a\u4e3e\u997f\u6c49\u5f0f\u5355\u4f8b")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"{\n    ...\n    enum NaturalOrderComparator implements Comparator<Comparable<Object>> {\n        INSTANCE;\n\n        @Override\n        public int compare(Comparable<Object> c1, Comparable<Object> c2) {\n            return c1.compareTo(c2);\n        }\n\n        @Override\n        public Comparator<Comparable<Object>> reversed() {\n            return Comparator.reverseOrder();\n        }\n    }\n    ...\n}\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Console")," \u4f53\u73b0\u4e86 ",(0,a.kt)("strong",{parentName:"p"},"\u53cc\u68c0\u9501\u61d2\u6c49\u5f0f\u5355\u4f8b")))}u.isMDXComponent=!0}}]);